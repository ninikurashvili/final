import{a as H}from"./chunk-XVSV4Z7K.js";import"./chunk-A5SNLFLJ.js";import"./chunk-N23URJYW.js";import{c as G,d as L,e as Y,g as j}from"./chunk-MUENI3WD.js";import"./chunk-YOE54UW5.js";import{a as z}from"./chunk-ODGVGKPQ.js";import{a as U,c as $,g as q,i as J,j as K,m as Q}from"./chunk-DX6CKAMP.js";import"./chunk-AA7YHGA7.js";import{i as R,j as W}from"./chunk-4JNOYXIX.js";import{$ as I,$a as C,A as T,B as v,Ba as c,N as V,O as x,Qa as P,Sa as g,Xa as a,Y as f,Ya as o,Za as w,_a as _,ab as F,bb as D,cb as h,hb as N,ib as u,ja as m,jb as O,ka as p,l as M,lb as B,mb as E,n as S,nb as b,pb as A,vb as k}from"./chunk-3KFIUI6B.js";function X(i,n){if(i&1){let s=F();_(0),a(1,"input",12),b("ngModelChange",function(t){m(s);let r=h();return E(r.selectedBrand,t)||(r.selectedBrand=t),p(t)}),D("change",function(){let t=m(s).$implicit,r=h();return p(r.sortByBrand(t))}),o(),a(2,"label",13),u(3),o(),w(4,"br"),C()}if(i&2){let s=n.$implicit,e=n.index,t=h();c(),g("id","brand"+e)("value",s),B("ngModel",t.selectedBrand),c(),g("for","brand"+e),c(),O(s)}}function Z(i,n){if(i&1&&(_(0),w(1,"app-product-display",15),C()),i&2){let s=n.$implicit;c(),g("productToDisplay",s)}}function ee(i,n){if(i&1&&(_(0),P(1,Z,2,1,"ng-container",14),C()),i&2){let s=h();c(),g("ngForOf",s.productsByCategory)("ngForTrackBy",s.trackByProductId)}}function te(i,n){i&1&&(a(0,"p",16),u(1,"\u10DE\u10E0\u10DD\u10D3\u10E3\u10E5\u10E2\u10D4\u10D1\u10D8 \u10D0\u10E0 \u10D0\u10E0\u10D8\u10E1 \u10EE\u10D4\u10DA\u10DB\u10D8\u10E1\u10D0\u10EC\u10D5\u10D3\u10DD\u10DB\u10D8."),o())}var ye=(()=>{let n=class n{constructor(){this.title=f(G),this.router=f(j),this.activedRoute=f(Y),this.productService=f(z),this.destroy$=new M,this.selectedBrand=null,this.productsByCategory=[],this.allProductsByCategory=[],this.filteredProducts=[],this.brandNames=["Apple","Samsung","Oppo","Vivo","Realme","Asus","Huawei","Dell","Lenovo","Amazon","Beats","TechGear","GadgetMaster","SnapTech","ProVision"],this.newprice=0,this.minPrice=0,this.maxPrice=0,this.category=this.activedRoute.snapshot.params.category,this.router.events.pipe(T(e=>e instanceof L),x(()=>{this.category=this.activedRoute.snapshot.params.category,this.loadProductsByCategory()}),V(this.destroy$)).subscribe()}ngOnInit(){this.loadProductsByCategory()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadProductsByCategory(){this.productService.getByCategory(this.category).pipe(x(e=>{this.productsByCategory=e.products.filter(t=>t.id!==126),this.allProductsByCategory=[...this.productsByCategory],this.setDefaultMaxPrice()}),v(e=>(console.error("Error loading products by category:",e),S))).subscribe()}setDefaultMaxPrice(){this.allProductsByCategory.length>0?this.maxPrice=Math.max(...this.allProductsByCategory.map(e=>Number((e.price*2.6).toFixed(2)))):this.maxPrice=0}filterProducts(e){let t=this.minPrice||Number.NEGATIVE_INFINITY,r=this.maxPrice||Number.POSITIVE_INFINITY;return e.filter(l=>{let y=this.calculateDiscountedPrice(l.price,l.discountPercentage);return y>=t&&y<=r})}filterByBrand(e,t){return e.filter(r=>r.brand===t)}applyFilter(){let e=this.selectedBrand?this.filterByBrand(this.allProductsByCategory,this.selectedBrand):this.allProductsByCategory;this.productsByCategory=this.filterProducts(e)}sortByBrand(e){this.selectedBrand=e;let t=this.filterByBrand(this.allProductsByCategory,e);this.productsByCategory=this.filterProducts(t)}reset(){this.minPrice=0,this.setDefaultMaxPrice(),this.selectedBrand=null,this.productsByCategory=[...this.allProductsByCategory],this.filteredProducts=[]}calculateDiscountedPrice(e,t){return t>15?Number((e-e*t/100).toFixed(2))*2.6:e*2.6}trackByProductId(e,t){return t.id}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=I({type:n,selectors:[["app-productsort-filter"]],standalone:!0,features:[A],decls:23,vars:5,consts:[["noProducts",""],[1,"contain"],[1,"form-group"],["for","minPrice"],["type","number","id","minPrice",1,"form-control",3,"ngModelChange","ngModel"],["for","maxPrice"],["type","number","id","maxPrice",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-5","mb-3"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","m-2",3,"click"],[1,"productrow"],[4,"ngIf","ngIfElse"],["type","radio","name","brandGroup",3,"ngModelChange","change","id","value","ngModel"],[3,"for"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"productToDisplay"],[1,"m-5"]],template:function(t,r){if(t&1){let l=F();a(0,"section",1)(1,"section")(2,"section")(3,"div",2)(4,"label",3),u(5,"\u10DB\u10D8\u10DC\u10D8\u10DB\u10D0\u10DA\u10E3\u10E0\u10D8"),o(),a(6,"input",4),b("ngModelChange",function(d){return m(l),E(r.minPrice,d)||(r.minPrice=d),p(d)}),o()(),a(7,"div",2)(8,"label",5),u(9,"\u10DB\u10D0\u10E5\u10E1\u10D8\u10DB\u10D0\u10DA\u10E3\u10E0\u10D8"),o(),a(10,"input",6),b("ngModelChange",function(d){return m(l),E(r.maxPrice,d)||(r.maxPrice=d),p(d)}),o()()(),a(11,"section",7)(12,"h5"),u(13,"\u10D1\u10E0\u10D4\u10DC\u10D3\u10D4\u10D1\u10D8"),o(),P(14,X,5,5,"ng-container",8),o(),a(15,"button",9),D("click",function(){return m(l),p(r.applyFilter())}),u(16," Apply Filter "),o(),a(17,"button",9),D("click",function(){return m(l),p(r.reset())}),u(18,"Reset"),o()(),a(19,"section",10),P(20,ee,2,2,"ng-container",11)(21,te,2,0,"ng-template",null,0,k),o()()}if(t&2){let l=N(22);c(6),B("ngModel",r.minPrice),c(4),B("ngModel",r.maxPrice),c(4),g("ngForOf",r.brandNames),c(6),g("ngIf",r.productsByCategory.length)("ngIfElse",l)}},dependencies:[H,Q,U,J,K,$,q,R,W],styles:[".contain[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr}.contain[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{background-color:#f28f6a;border:#f28f6a}.contain[_ngcontent-%COMP%]   .productrow[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr}@media (max-width: 769px){.productrow[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)!important}}"]});let i=n;return i})();export{ye as default};
